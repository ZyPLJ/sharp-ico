name: å‘å¸ƒSharpIcoWeb
run-name: ${{ github.actor }} æ­£åœ¨å‘å¸ƒSharpIcoWeb ğŸš€

on:
  push:
    tags:
      - "v*.*.*"  # æ›´æ˜ç¡®çš„ç‰ˆæœ¬æ ¼å¼åŒ¹é…
      
# ä¸ºæ•´ä¸ªå·¥ä½œæµè®¾ç½®æƒé™
permissions:
  contents: write
  id-token: write
  issues: write

jobs:
  build-asset:
    # è¿è¡Œç¯å¢ƒï¼ˆæ¨èæœ€æ–° Ubuntuï¼‰
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4  # å®˜æ–¹ actionï¼Œç”¨äºæ‹‰å–ä»£ç 
        with:
          fetch-depth: 0  # è·å–å…¨éƒ¨ Git å†å²ï¼ˆå¦‚éœ€æ‰“ Tag å¿…é¡»è®¾ç½®ï¼‰

      - name: åˆ›å»º .zip å‹ç¼©åŒ…
        run: |
          # æ’é™¤ .git ç›®å½•ï¼Œå‹ç¼©å½“å‰æ–‡ä»¶å¤¹ä¸º SharpIcoWeb.zip
          zip -r SharpIcoWeb.zip . -x '*.git*'

      - name: ä¸Šä¼ èµ„äº§
        uses: actions/upload-release-asset@v1  # å®˜æ–¹ action
        env:
          # è‡ªåŠ¨ç”Ÿæˆçš„ tokenï¼Œæ— éœ€é¢å¤–é…ç½®
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          # åŠ¨æ€è·å–ä¸Šä¼  URLï¼ˆç”± GitHub æä¾›ï¼‰
          upload_url: ${{ github.event.release.upload_url }}
          # æœ¬åœ°å‹ç¼©åŒ…è·¯å¾„
          asset_path: ./SharpIcoWeb.zip
          # èµ„äº§æ˜¾ç¤ºåç§°ï¼ˆç”¨æˆ·ä¸‹è½½æ—¶çœ‹åˆ°çš„åå­—ï¼‰
          asset_name: SharpIcoWeb_v${{ github.event.release.tag_name }}.zip
          # æ–‡ä»¶ç±»å‹ï¼ˆå¯é€‰ï¼Œä½†å»ºè®®æ˜ç¡®ï¼‰
          asset_content_type: application/zip